<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lookismdle - Daily Edition</title>
<style>
:root {
  --bg: #0b0e11;
  --surface: #1a1d21;
  --primary: #3498db;
  --correct: #27ae60;
  --partial: #f1c40f;
  --wrong: #c0392b;
  --danger: #e74c3c;
  --text: #ffffff;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  text-align: center;
  margin: 0;
  padding: 10px;
}

.header-box { padding: 20px; background: var(--surface); border-bottom: 3px solid var(--primary); margin-bottom: 20px; }
.streak-container { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-bottom: 10px; }
.streak-tag { font-weight: 800; font-size: 1rem; }
.mode-indicator { 
    display: inline-block; 
    padding: 5px 15px; 
    border-radius: 20px; 
    font-size: 0.8rem; 
    font-weight: bold; 
    margin-top: 10px;
    background: #444;
}
.boss-mode { background: var(--danger) !important; animation: pulse 2s infinite; }
.daily-mode { background: #9b59b6 !important; }

@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
    100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
}

.search-container { position: relative; display: flex; justify-content: center; gap: 10px; max-width: 700px; margin: 0 auto 30px; }
input { padding: 12px; border-radius: 8px; border: none; width: 60%; background: #2c3136; color: white; }
.btn { cursor: pointer; border: none; border-radius: 8px; font-weight: bold; padding: 10px 20px; text-transform: uppercase; transition: 0.2s; }
.btn-guess { background: var(--primary); color: white; }
.btn-giveup { background: var(--wrong); color: white; } 
.btn-next { background: var(--correct); color: white; display: none; }
.btn-mode { background: #555; color: white; margin: 5px; font-size: 0.7rem; }

#timer-box { font-size: 0.9rem; color: #aaa; margin-top: 10px; display: none; }

table { margin: 0 auto; border-spacing: 5px; width: 100%; max-width: 1200px; }
td { padding: 15px 5px; font-size: 11px; font-weight: bold; border-radius: 5px; color: white; }
.green { background: var(--correct); }
.yellow { background: var(--partial); color: #000; }
.red { background: var(--wrong); }

#suggestions {
  position: absolute; top: 100%; left: 10%; width: 60%; 
  background: var(--surface); z-index: 10; border-radius: 0 0 8px 8px;
  max-height: 200px; overflow-y: auto; display: none;
}
.sug-item { padding: 10px; text-align: left; cursor: pointer; border-bottom: 1px solid #333; }
.sug-item:hover { background: #333; }
</style>
</head>
<body>

<div class="header-box">
    <div class="streak-container">
        <div class="streak-tag" style="color: #9b59b6;">üìÖ DAILY: <span id="dailyStreakVal">0</span></div>
        <div class="streak-tag" style="color: var(--danger);">üíÄ BOSS: <span id="bossStreakVal">0</span></div>
        <div class="streak-tag" style="color: var(--partial);">‚ôæÔ∏è INFINITE: <span id="streakVal">0</span></div>
    </div>
    <h1>LOOKISMDLE</h1>
    <div>
        <button class="btn btn-mode" onclick="setMode('daily')">Daily Mode</button>
        <button class="btn btn-mode" onclick="setMode('boss')">Boss Rush</button>
        <button class="btn btn-mode" onclick="setMode('classic')">Infinite Mode</button>
    </div>
    <div id="modeTag" class="mode-indicator">Mode</div>
    <div id="timer-box">Next Daily in: <span id="timerVal">00:00:00</span></div>
    <div id="guessCounter" style="display:none; margin-top:10px;">Guesses Left: <span id="countVal">5</span></div>
</div>

<div class="search-container">
    <input type="text" id="charSearch" placeholder="Enter name..." autocomplete="off">
    <div id="suggestions"></div>
    <button class="btn btn-guess" onclick="makeGuess()">Guess</button>
    <button class="btn btn-giveup" onclick="giveUp()">Give Up</button>
</div>

<div id="msg"></div>
<button class="btn btn-next" id="nextBtn" onclick="location.reload()">Next Round</button>

<table>
    <thead>
        <tr>
            <th>Name</th><th>Gen</th><th>Height</th><th>Hometown</th><th>Affiliation</th><th>Style</th><th>Age</th>
        </tr>
    </thead>
    <tbody id="tableBody"></tbody>
</table>

<script>
const characters = [
  {name:"Daniel Park / Park Hyung Suk", gen:"Gen 2", height:181, hometown:"Seoul", aff:"Allied", former:["Workers"], style:"Copy", age:19},
  {name:"Johan Seong / Seong Yo Han", gen:"Gen 2", height:179, hometown:"Seoul", aff:"None", former:["God Dog", "Big Deal", "Workers"], style:"Copy", age:19},
  {name:"Eli Jang / Jang Hyun", gen:"Gen 2", height:182, hometown:"Seoul", aff:"Hostel", former:["Workers"], style:"Wildness", age:19},
  {name:"Zack Lee / Lee Jin Sung", gen:"Gen 2", height:185, hometown:"Seoul", aff:"Allied", former:["None"], style:"Boxing", age:19},
  {name:"Samuel Seo / Seo Seong Eun", gen:"Gen 2", height:195, hometown:"Seoul", aff:"Workers", former:["Big Deal"], style:"Brawling", age:20},
  {name:"Sinu Han / Han Shin Woo", gen:"Gen 1", height:184, hometown:"Seoul", aff:"Big Deal", former:["Workers"], style:"IA", age:22},
  {name:"Jake Kim / Kim Gi Myeong", gen:"Gen 2", height:194, hometown:"Seoul", aff:"Big Deal", former:["None"], style:"MMA", age:19},
  {name:"Gun Park / Jong Gun", gen:"Gen 1", height:190, hometown:"Tokyo", aff:"HNH Group", former:["Magami Family"], style:"Kyokushin", age:20},
  {name:"Vasco / Lee Eun Tae", gen:"Gen 2", height:183, hometown:"Seoul", aff:"Burn Knuckles", former:["Allied"], style:"Muay Thai", age:19},
  {name:"Hudson Ahn / Ahn Hyun Sung", gen:"Gen 2", height:178, hometown:"Ansan", aff:"Allied", former:["Ansan"], style:"Punching", age:20},
  {name:"James Lee / Lee Ji Hoon", gen:"Gen 1", height:188, hometown:"Seoul", aff:"HNH Group", former:["None"], style:"IA", age:23},
  {name:"Goo Kim / Kim Jun Goo", gen:"Gen 1", height:190, hometown:"Seoul", aff:"HNH Group", former:["None"], style:"Weapons", age:20},
  {name:"Jay Hong / Hong Jae Yeol", gen:"Gen 2", height:184, hometown:"Seoul", aff:"Allied", former:["None"], style:"Systema", age:19},
  {name:"Vin Jin / Jin Ho Bin", gen:"Gen 2", height:182, hometown:"Cheonliang", aff:"Allied", former:["Cheonliang"], style:"Kudo", age:19},
  {name:"Mary Kim / Kim Mi Jin", gen:"Gen 2", height:165, hometown:"Cheonliang", aff:"Burn Knuckles", former:["Cheonliang"], style:"Judo", age:19},
  {name:"Jerry Kwon / Kwon Ji Tae", gen:"Gen 2", height:198, hometown:"Seoul", aff:"Big Deal", former:["None"], style:"Boxing", age:19},
  {name:"Lineman / Im Gyeong Buk", gen:"Gen 2", height:177, hometown:"Seoul", aff:"Big Deal", former:["None"], style:"Combat", age:19},
  {name:"Warren Chae / Chae Won Seok", gen:"Gen 2", height:188, hometown:"Seoul", aff:"Hostel", former:["Workers"], style:"CQC", age:19},
  {name:"Tom Lee / Lee Do Gyu", gen:"Gen 0", height:210, hometown:"Seoul", aff:"White Tiger", former:["Fist Gang"], style:"Wildness", age:48},
  {name:"Charles Choi / Choi Dong Soo", gen:"Gen 0", height:185, hometown:"Seoul", aff:"HNH Group", former:["Fist Gang"], style:"IA", age:50},
  {name:"Jincheol Park / Park Jin Cheol", gen:"Gen 0", height:192, hometown:"Seoul", aff:"Military", former:["None"], style:"CQC", age:40},
  {name:"Hansu Seong / Seong Han Soo", gen:"Gen 0", height:181, hometown:"Seoul", aff:"Military", former:["None"], style:"Taekwondo", age:41},
  {name:"Manager Kim / Kim Bu Jang", gen:"Gen 0", height:180, hometown:"Seoul", aff:"White Tiger", former:["Military"], style:"CQC", age:42},
  {name:"Olly Wang / Wang Oh Chun", gen:"Gen 2", height:184, hometown:"Seoul", aff:"Hostel", former:["None"], style:"Free", age:19},
  {name:"Mandeok Bang / Bang Man Deok", gen:"Gen 2", height:202, hometown:"Seoul", aff:"Workers", former:["None"], style:"Capoeira", age:20},
  {name:"Yoosung / Yoo Sung", gen:"Gen 2", height:178, hometown:"Seoul", aff:"Workers", former:["None"], style:"Instinct", age:20},
  {name:"Ryuhei Kuroda / Kuroda Ryuhei", gen:"Gen 2", height:183, hometown:"Kanto", aff:"Workers", former:["Magami Family"], style:"Brawling", age:20},
  {name:"Xiaolung / Shaorong", gen:"Gen 2", height:190, hometown:"China", aff:"Workers", former:["Tieda"], style:"Staff", age:20},
  {name:"Kenta Magami / Magami Kenta", gen:"Gen 2", height:172, hometown:"Japan", aff:"Workers", former:["Magami Family"], style:"Karate", age:19},
  {name:"Jibeom Kwak / Kwak Ji Beom", gen:"Gen 2", height:188, hometown:"Chungcheong", aff:"Allied", former:["None"], style:"Chop", age:20},
  {name:"Jihan Kwak / Kwak Ji Han", gen:"Gen 2", height:189, hometown:"Chungcheong", aff:"Allied", former:["None"], style:"Chop", age:20},
  {name:"Jichang Kwak / Kwak Ji Chang", gen:"Gen 1", height:192, hometown:"Seoul", aff:"None", former:["Chungcheong"], style:"Chop", age:24},
  {name:"Taesoo Ma / Ma Tae Soo", gen:"Gen 1", height:191, hometown:"Ansan", aff:"None", former:["None"], style:"Punching", age:24},
  {name:"Gongseob Ji / Ji Gong Seob", gen:"Gen 1", height:187, hometown:"Daegu", aff:"None", former:["None"], style:"Boxing", age:24},
  {name:"Seokdu Wang / Wang Seok Du", gen:"Gen 1", height:185, hometown:"Suwon", aff:"None", former:["None"], style:"Headbutt", age:25},
  {name:"Jingyong Park / Park Jin Young", gen:"Gen 0", height:183, hometown:"Seoul", aff:"Workers", former:["Fist Gang"], style:"Copy", age:48},
  {name:"Gapryong Kim / Kim Gap Ryong", gen:"Gen 0", height:195, hometown:"Seoul", aff:"None", former:["Fist Gang"], style:"MMA", age:50},
  {name:"Logan Lee / Lee Tae Sung", gen:"Gen 2", height:192, hometown:"Seoul", aff:"Workers", former:["None"], style:"Jiu-Jitsu", age:19},
  {name:"Crystal Choi / Choi Soo Jung", gen:"Gen 2", height:168, hometown:"Seoul", aff:"HNH Group", former:["None"], style:"Aikido", age:19},
  {name:"Jiho Park / Park Ji Ho", gen:"Gen 2", height:171, hometown:"Seoul", aff:"None", former:["None"], style:"Dirty", age:19},
  {name:"Duke Pyeon / Pyeon Deok Hwa", gen:"Gen 2", height:160, hometown:"Seoul", aff:"None", former:["None"], style:"None", age:19},
  {name:"Jace Park / Park Bum Jae", gen:"Gen 2", height:187, hometown:"Seoul", aff:"Burn Knuckles", former:["None"], style:"Muay Thai", age:19},
  {name:"Chuck Kwak / Kwak Paeng Gwi", gen:"Gen 2", height:184, hometown:"Seoul", aff:"Hostel", former:["None"], style:"MMA", age:21},
  {name:"Justin Peng / Peng Gwan", gen:"Gen 2", height:185, hometown:"Seoul", aff:"Hostel", former:["None"], style:"MMA", age:21},
  {name:"Max Kang / Kang Ju Chan", gen:"Gen 2", height:182, hometown:"Seoul", aff:"Hostel", former:["None"], style:"Wrestling", age:20},
  {name:"Derek Han / Han Jae Hui", gen:"Gen 2", height:181, hometown:"Seoul", aff:"Hostel", former:["None"], style:"Wrestling", age:20},
  {name:"Jacky Lee / Lee Jin Yong", gen:"Gen 2", height:179, hometown:"Ansan", aff:"Ansan", former:["None"], style:"Kickboxing", age:20},
  {name:"Channing Choi / Choi Chang Won", gen:"Gen 2", height:184, hometown:"Ansan", aff:"Ansan", former:["None"], style:"Street", age:20},
  {name:"Jason Yoon / Yoon Jae Hee", gen:"Gen 2", height:180, hometown:"Seoul", aff:"Big Deal", former:["None"], style:"Taekwondo", age:19},
  {name:"Brad Lee / Lee Geon Woo", gen:"Gen 2", height:191, hometown:"Seoul", aff:"Big Deal", former:["None"], style:"Boxing", age:19},
  {name:"Hangyeol Baek / Baek Han Gyeol", gen:"Gen 2", height:176, hometown:"Seoul", aff:"Workers", former:["None"], style:"Medical", age:22},
  {name:"Taejin Cheon / Cheon Tae Jin", gen:"Gen 2", height:188, hometown:"Cheonliang", aff:"Workers", former:["None"], style:"Ssireum", age:21},
  {name:"Beolgu Lee / Lee Beol Gu", gen:"Gen 1", height:178, hometown:"Seoul", aff:"None", former:["None"], style:"Lying", age:25},
  {name:"Gwangnam Dokgo / Dokgo Gwang Nam", gen:"Gen 2", height:182, hometown:"Seoul", aff:"None", former:["None"], style:"Street", age:20},
  {name:"Darius Hong / Hong Du Pyo", gen:"Gen 2", height:194, hometown:"Seoul", aff:"None", former:["None"], style:"Street", age:22},
  {name:"Eunhyuk Lee / Lee Eun Hyeok", gen:"Gen 2", height:175, hometown:"Seoul", aff:"None", former:["None"], style:"Taekwondo", age:19},
  {name:"Huseong Ha / Ha Hu Seong", gen:"Gen 2", height:186, hometown:"Seoul", aff:"Burn Knuckles", former:["None"], style:"Brawling", age:20},
  {name:"Hyunmyeong Lee / Lee Hyun Myeong", gen:"Gen 2", height:177, hometown:"Seoul", aff:"None", former:["None"], style:"Boxing", age:19},
  {name:"Jin Jang / Jang Jin", gen:"Gen 2", height:178, hometown:"Seoul", aff:"Workers", former:["God Dog"], style:"Analysis", age:20},
  {name:"Koji / Ko Ji", gen:"Gen 2", height:168, hometown:"Seoul", aff:"HNH Group", former:["None"], style:"Hacking", age:17},
  {name:"Leon Lee / Lee Rin", gen:"Gen 2", height:166, hometown:"Seoul", aff:"Burn Knuckles", former:["None"], style:"None", age:19},
  {name:"Minwoo Kim / Kim Min Woo", gen:"Gen 2", height:181, hometown:"Seoul", aff:"None", former:["None"], style:"Dirty", age:19},
  {name:"Namsoo Lee / Lee Nam Soo", gen:"Gen 2", height:170, hometown:"Seoul", aff:"None", former:["None"], style:"None", age:19},
  {name:"Sally Park / Park Se Rim", gen:"Gen 2", height:164, hometown:"Seoul", aff:"Hostel", former:["None"], style:"None", age:19},
  {name:"Scott Kwon / Kwon Seung Ryong", gen:"Gen 2", height:188, hometown:"Seoul", aff:"God Dog", former:["None"], style:"MMA", age:20},
  {name:"Seth Lee / Lee Seung Han", gen:"Gen 2", height:185, hometown:"Seoul", aff:"None", former:["None"], style:"Brawling", age:21},
  {name:"Taehun Seong / Seong Tae Hoon", gen:"Gen 2", height:181, hometown:"Seoul", aff:"None", former:["None"], style:"Taekwondo", age:19},
  {name:"Vivi / Bee Bee", gen:"Gen 2", height:167, hometown:"China", aff:"Workers", former:["None"], style:"None", age:20},
  {name:"Woochul Park / Park Woo Chul", gen:"Gen 2", height:180, hometown:"Seoul", aff:"None", former:["None"], style:"Boxing", age:19},
  {name:"Yeonhui Kim / Kim Yeon Hui", gen:"Gen 2", height:163, hometown:"Seoul", aff:"Big Deal", former:["None"], style:"None", age:21},
  {name:"Yui Kim / Kim Yui", gen:"Gen 2", height:165, hometown:"Seoul", aff:"None", former:["None"], style:"None", age:19},
  {name:"Zeus / Je-U-Seu", gen:"Gen 2", height:189, hometown:"Seoul", aff:"None", former:["None"], style:"Wrestling", age:22},
  {name:"Gitae Kim / Kim Gi Tae", gen:"Gen 1", height:196, hometown:"Seoul", aff:"Mexico", former:["None"], style:"Free", age:26},
  {name:"Elite / Choi Dong Soo", gen:"Gen 0", height:185, hometown:"Seoul", aff:"HNH Group", former:["Fist Gang"], style:"IA", age:52}
];

let mode = localStorage.getItem("lookism_mode") || "daily";
let streak = parseInt(localStorage.getItem("lookism_streak") || 0);
let dailyStreak = parseInt(localStorage.getItem("lookism_daily_streak") || 0);
let bossStreak = parseInt(localStorage.getItem("lookism_boss_streak") || 0);
let gameActive = true;
let guessedNames = [];
let guessesLeft = 5;

// Daily Logic Persistence
const todayStr = new Date().toDateString();
const dailyDataKey = "lookism_daily_guesses_" + todayStr;

function getDailyAnswer() {
    let hash = 0;
    for (let i = 0; i < todayStr.length; i++) {
        hash = ((hash << 5) - hash) + todayStr.charCodeAt(i);
        hash |= 0;
    }
    return characters[Math.abs(hash) % characters.length];
}

const answer = (mode === "daily") ? getDailyAnswer() : characters[Math.floor(Math.random() * characters.length)];

document.getElementById("streakVal").textContent = streak;
document.getElementById("dailyStreakVal").textContent = dailyStreak;
document.getElementById("bossStreakVal").textContent = bossStreak;

updateUI();
startTimer();
loadDailyProgress();

function setMode(m) {
    localStorage.setItem("lookism_mode", m);
    location.reload();
}

function startTimer() {
    function updateTimer() {
        const now = new Date();
        const nextDay = new Date();
        nextDay.setHours(24, 0, 0, 0);
        const diff = nextDay - now;
        const h = Math.floor(diff / 3600000).toString().padStart(2, '0');
        const m = Math.floor((diff % 3600000) / 60000).toString().padStart(2, '0');
        const s = Math.floor((diff % 60000) / 1000).toString().padStart(2, '0');
        document.getElementById("timerVal").textContent = `${h}:${m}:${s}`;
    }
    updateTimer();
    setInterval(updateTimer, 1000);
}

function updateUI() {
    const tag = document.getElementById("modeTag");
    const counter = document.getElementById("guessCounter");
    const timerBox = document.getElementById("timer-box");
    const nextBtn = document.getElementById("nextBtn");

    if (mode === "boss") {
        tag.textContent = "BOSS RUSH MODE (5 Guesses)";
        tag.className = "mode-indicator boss-mode";
        counter.style.display = "block";
    } else if (mode === "daily") {
        tag.textContent = "DAILY MODE";
        tag.className = "mode-indicator daily-mode";
        timerBox.style.display = "block";
        counter.style.display = "none";
        nextBtn.textContent = "Next Daily in " + document.getElementById("timerVal").textContent;
    } else {
        tag.textContent = "INFINITE MODE (Unlimited)";
        tag.className = "mode-indicator";
        counter.style.display = "none";
    }
}

function loadDailyProgress() {
    if (mode !== "daily") return;
    const saved = JSON.parse(localStorage.getItem(dailyDataKey) || "[]");
    saved.forEach(name => {
        const char = characters.find(c => c.name === name);
        if (char) renderGuessRow(char);
    });
    // If last guess was correct, lock the game
    if (saved.includes(answer.name)) {
        gameActive = false;
        document.getElementById("msg").innerHTML = `<h2 style="color:var(--correct)">DAILY COMPLETE!</h2>`;
        document.getElementById("charSearch").disabled = true;
    }
}

const input = document.getElementById("charSearch");
const sugBox = document.getElementById("suggestions");

input.oninput = () => {
    const val = input.value.toLowerCase();
    sugBox.innerHTML = "";
    if(!val) { sugBox.style.display = "none"; return; }
    const filtered = characters.filter(c => (c.name.toLowerCase().includes(val)) && !guessedNames.includes(c.name));
    filtered.forEach(c => {
        const d = document.createElement("div");
        d.className = "sug-item";
        d.textContent = c.name;
        d.onclick = () => { input.value = c.name; sugBox.style.display = "none"; makeGuess(); };
        sugBox.appendChild(d);
    });
    sugBox.style.display = filtered.length ? "block" : "none";
};

function makeGuess() {
    if(!gameActive) return;
    const g = characters.find(c => c.name.toLowerCase() === input.value.toLowerCase());
    if(!g || guessedNames.includes(g.name)) { input.value = ""; return; }

    renderGuessRow(g);
    
    // Save Daily Guesses
    if (mode === "daily") {
        const currentGuesses = JSON.parse(localStorage.getItem(dailyDataKey) || "[]");
        currentGuesses.push(g.name);
        localStorage.setItem(dailyDataKey, JSON.stringify(currentGuesses));
    }

    input.value = "";
    if(g.name === answer.name) winGame();
    else if(mode === "boss") {
        guessesLeft--;
        document.getElementById("countVal").textContent = guessesLeft;
        if(guessesLeft <= 0) loseGame();
    }
}

function renderGuessRow(g) {
    guessedNames.push(g.name);
    const row = document.getElementById("tableBody").insertRow(0);
    let affClass = (g.aff === answer.aff) ? "green" : (answer.former.includes(g.aff) || g.former.includes(answer.aff) ? "yellow" : "red");

    addCell(row, g.name, g.name === answer.name ? "green" : "red");
    addCell(row, g.gen, g.gen === answer.gen ? "green" : "red");
    addComparisonCell(row, g.height, answer.height, "cm");
    addCell(row, g.hometown, g.hometown === answer.hometown ? "green" : "red");
    addCell(row, g.aff, affClass);
    addCell(row, g.style, g.style === answer.style ? "green" : "red");
    addComparisonCell(row, g.age, answer.age, "");
}

function giveUp() {
    if(!gameActive) return;
    if(confirm("Give up and reset streak?")) loseGame();
}

function winGame() {
    gameActive = false;
    if(mode === "daily"
