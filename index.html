<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lookismdle - Image Edition</title>
<style>
:root {
  --bg: #0b0e11;
  --surface: #1a1d21;
  --primary: #3498db;
  --correct: #27ae60;
  --partial: #f1c40f;
  --wrong: #c0392b;
  --danger: #e74c3c;
  --text: #ffffff;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  text-align: center;
  margin: 0;
  padding: 10px;
}

.header-box { padding: 20px; background: var(--surface); border-bottom: 3px solid var(--primary); margin-bottom: 20px; }
.streak-tag { color: var(--partial); font-weight: 800; font-size: 1.2rem; }

/* Image Styles */
.reveal-img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    border: 4px solid var(--primary);
    margin: 15px auto;
    object-fit: cover;
    display: none;
}

.table-portrait {
    width: 40px;
    height: 40px;
    border-radius: 4px;
    vertical-align: middle;
    margin-right: 8px;
    object-fit: cover;
    background: #333;
}

.search-container { position: relative; display: flex; justify-content: center; gap: 10px; max-width: 600px; margin: 0 auto 30px; }
input { padding: 12px; border-radius: 8px; border: none; width: 70%; background: #2c3136; color: white; }

.btn { cursor: pointer; border: none; border-radius: 8px; font-weight: bold; padding: 10px 20px; text-transform: uppercase; }
.btn-guess { background: var(--primary); color: white; }
.btn-next { background: var(--correct); color: white; display: none; margin-top: 10px; }

table { margin: 0 auto; border-spacing: 5px; width: 100%; max-width: 1200px; }
td { padding: 12px 5px; font-size: 11px; font-weight: bold; border-radius: 5px; color: white; }
.green { background: var(--correct); }
.yellow { background: var(--partial); color: #000; }
.red { background: var(--wrong); }

#suggestions {
  position: absolute; top: 100%; left: 10%; width: 60%; 
  background: var(--surface); z-index: 10; border-radius: 0 0 8px 8px;
  max-height: 200px; overflow-y: auto; display: none;
}
.sug-item { padding: 10px; text-align: left; cursor: pointer; border-bottom: 1px solid #333; }
</style>
</head>
<body>

<div class="header-box">
    <div class="streak-tag">ðŸ”¥ STREAK: <span id="streakVal">0</span></div>
    <h1>LOOKISMDLE</h1>
    <div id="gameStatus"></div>
    <img id="revealImage" class="reveal-img" src="" alt="Character Reveal">
    <br>
    <button class="btn btn-next" id="nextBtn" onclick="location.reload()">Next Round</button>
</div>

<div class="search-container">
    <input type="text" id="charSearch" placeholder="Enter character name..." autocomplete="off">
    <div id="suggestions"></div>
    <button class="btn btn-guess" id="guessBtn" onclick="makeGuess()">Guess</button>
</div>

<table>
    <thead>
        <tr>
            <th>Character</th>
            <th>Gen</th>
            <th>Height</th>
            <th>Hometown</th>
            <th>Affiliation</th>
            <th>Style</th>
            <th>Age</th>
        </tr>
    </thead>
    <tbody id="tableBody"></tbody>
</table>

<script>
const characters = [
  {name:"Daniel Park", gen:"Gen 2", height:181, hometown:"Seoul", aff:"Allied", former:["Workers"], style:"Copy", age:19, img:"https://via.placeholder.com/150/0000FF/FFFFFF?text=Daniel"},
  {name:"Johan Seong", gen:"Gen 2", height:179, hometown:"Seoul", aff:"None", former:["God Dog", "Big Deal", "Workers"], style:"Copy", age:19, img:"https://via.placeholder.com/150/8B4513/FFFFFF?text=Johan"},
  {name:"Eli Jang", gen:"Gen 2", height:182, hometown:"Seoul", aff:"Hostel", former:["Workers"], style:"Wildness", age:19, img:"https://via.placeholder.com/150/000000/FFFFFF?text=Eli"},
  {name:"Zack Lee", gen:"Gen 2", height:185, hometown:"Seoul", aff:"Allied", former:[], style:"Boxing", age:19, img:"https://via.placeholder.com/150/333333/FFFFFF?text=Zack"},
  {name:"Gun Park", gen:"Gen 1", height:190, hometown:"Tokyo", aff:"HNH Group", former:[], style:"Kyokushin", age:20, img:"https://via.placeholder.com/150/FF0000/FFFFFF?text=Gun"},
  {name:"Goo Kim", gen:"Gen 1", height:190, hometown:"Seoul", aff:"Secret Friends", former:[], style:"Weapons", age:20, img:"https://via.placeholder.com/150/FFFF00/000000?text=Goo"},
  {name:"James Lee", gen:"Gen 1", height:188, hometown:"Seoul", aff:"HNH Group", former:[], style:"IA", age:23, img:"https://via.placeholder.com/150/FFC0CB/000000?text=James"}
];

let streak = localStorage.getItem("lookism_streak") || 0;
document.getElementById("streakVal").textContent = streak;

const answer = characters[Math.floor(Math.random() * characters.length)];
let gameActive = true;

const input = document.getElementById("charSearch");
const sugBox = document.getElementById("suggestions");

input.oninput = () => {
    const val = input.value.toLowerCase();
    sugBox.innerHTML = "";
    if(!val) { sugBox.style.display = "none"; return; }
    const filtered = characters.filter(c => c.name.toLowerCase().includes(val));
    filtered.forEach(c => {
        const d = document.createElement("div");
        d.className = "sug-item";
        d.textContent = c.name;
        d.onclick = () => { input.value = c.name; sugBox.style.display = "none"; };
        sugBox.appendChild(d);
    });
    sugBox.style.display = filtered.length ? "block" : "none";
};

function makeGuess() {
    if(!gameActive) return;
    const g = characters.find(c => c.name.toLowerCase() === input.value.toLowerCase());
    if(!g) return;

    const row = document.getElementById("tableBody").insertRow(0);
    
    // Name cell with Portrait
    const nameCell = row.insertCell();
    nameCell.innerHTML = `<img src="${g.img}" class="table-portrait"> ${g.name}`;
    nameCell.className = g.name === answer.name ? "green" : "red";

    // Other categories
    addCell(row, g.gen, g.gen === answer.gen ? "green" : "red");
    addComparisonCell(row, g.height, answer.height, "cm");
    addCell(row, g.hometown, g.hometown === answer.hometown ? "green" : "red");
    
    // Affiliation with Yellow logic
    let affClass = "red";
    if (g.aff === answer.aff) affClass = "green";
    else if (answer.former.includes(g.aff) || g.former.includes(answer.aff)) affClass = "yellow";
    addCell(row, g.aff, affClass);

    addCell(row, g.style, g.style === answer.style ? "green" : "red");
    addComparisonCell(row, g.age, answer.age, "");

    input.value = "";
    if(g.name === answer.name) endGame(true);
}

function endGame(won) {
    gameActive = false;
    document.getElementById("guessBtn").disabled = true;
    const revealImg = document.getElementById("revealImage");
    revealImg.src = answer.img;
    revealImg.style.display = "block";
    
    if(won) {
        streak++;
        document.getElementById("gameStatus").innerHTML = `<h2 style="color:var(--correct)">VICTORY!</h2>`;
    } else {
        streak = 0;
        document.getElementById("gameStatus").innerHTML = `<h2 style="color:var(--danger)">FAILED! It was ${answer.name}</h2>`;
    }
    localStorage.setItem("lookism_streak", streak);
    document.getElementById("nextBtn").style.display = "inline-block";
}

function addCell(row, val, cls) {
    const c = row.insertCell();
    c.textContent = val;
    c.className = cls;
}

function addComparisonCell(row, val, target, unit) {
    const c = row.insertCell();
    const arrow = val < target ? " â†‘" : (val > target ? " â†“" : "");
    c.textContent = val + unit + arrow;
    c.className = val === target ? "green" : "red";
}
</script>
</body>
</html>
