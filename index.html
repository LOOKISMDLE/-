<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lookismdle - Boss Rush Edition</title>
<style>
:root {
  --bg: #0b0e11;
  --surface: #1a1d21;
  --primary: #3498db;
  --correct: #27ae60;
  --partial: #f1c40f;
  --wrong: #c0392b;
  --danger: #e74c3c;
  --text: #ffffff;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  text-align: center;
  margin: 0;
  padding: 10px;
}

/* UI Elements */
.header-box { padding: 20px; background: var(--surface); border-bottom: 3px solid var(--primary); margin-bottom: 20px; }
.streak-tag { color: var(--partial); font-weight: 800; font-size: 1.2rem; }
.mode-indicator { 
    display: inline-block; 
    padding: 5px 15px; 
    border-radius: 20px; 
    font-size: 0.8rem; 
    font-weight: bold; 
    margin-top: 10px;
    background: #444;
}
.boss-mode { background: var(--danger) !important; animation: pulse 2s infinite; }

@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
    100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
}

/* Buttons and Inputs */
.search-container { position: relative; display: flex; justify-content: center; gap: 10px; max-width: 600px; margin: 0 auto 30px; }
input { padding: 12px; border-radius: 8px; border: none; width: 70%; background: #2c3136; color: white; }
.btn { cursor: pointer; border: none; border-radius: 8px; font-weight: bold; padding: 10px 20px; text-transform: uppercase; }
.btn-guess { background: var(--primary); color: white; }
.btn-next { background: var(--correct); color: white; display: none; }
.btn-mode { background: #555; color: white; margin-bottom: 10px; }

/* Table */
table { margin: 0 auto; border-spacing: 5px; width: 100%; max-width: 1200px; }
td { padding: 15px 5px; font-size: 11px; font-weight: bold; border-radius: 5px; color: white; }
.green { background: var(--correct); }
.yellow { background: var(--partial); color: #000; } /* Partial match */
.red { background: var(--wrong); }

#suggestions {
  position: absolute; top: 100%; left: 10%; width: 60%; 
  background: var(--surface); z-index: 10; border-radius: 0 0 8px 8px;
  max-height: 200px; overflow-y: auto; display: none;
}
.sug-item { padding: 10px; text-align: left; cursor: pointer; border-bottom: 1px solid #333; }
.sug-item:hover { background: #333; }
</style>
</head>
<body>

<div class="header-box">
    <div class="streak-tag">ðŸ”¥ STREAK: <span id="streakVal">0</span></div>
    <h1>LOOKISMDLE</h1>
    <button class="btn btn-mode" onclick="toggleMode()">Switch to <span id="modeName">Boss Rush</span> Mode</button>
    <div id="modeTag" class="mode-indicator">Classic Mode (Unlimited Guesses)</div>
    <div id="guessCounter" style="display:none; margin-top:10px;">Guesses Left: <span id="countVal">5</span></div>
</div>

<div class="search-container">
    <input type="text" id="charSearch" placeholder="Enter English or Korean name..." autocomplete="off">
    <div id="suggestions"></div>
    <button class="btn btn-guess" onclick="makeGuess()">Guess</button>
</div>

<div id="msg"></div>
<button class="btn btn-next" id="nextBtn" onclick="location.reload()">Next Round</button>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Gen</th>
            <th>Height</th>
            <th>Hometown</th>
            <th>Affiliation</th>
            <th>Style</th>
            <th>Age</th>
        </tr>
    </thead>
    <tbody id="tableBody"></tbody>
</table>

<script>
// Logic: Former Affiliations add the "Yellow" partial match
const characters = [
  {name:"Daniel Park / Park Hyung Suk", gen:"Gen 2", height:181, hometown:"Seoul", aff:"Allied", former:["Workers"], style:"Copy", age:19},
  {name:"Johan Seong / Seong Yo Han", gen:"Gen 2", height:179, hometown:"Seoul", aff:"None", former:["God Dog", "Big Deal", "Workers"], style:"Copy", age:19},
  {name:"Eli Jang / Jang Hyun", gen:"Gen 2", height:182, hometown:"Seoul", aff:"Hostel", former:["Workers"], style:"Wildness", age:19},
  {name:"Zack Lee / Lee Jin Sung", gen:"Gen 2", height:185, hometown:"Seoul", aff:"Allied", former:["None"], style:"Boxing", age:19},
  {name:"Samuel Seo / Seo Seong Eun", gen:"Gen 2", height:195, hometown:"Seoul", aff:"Workers", former:["Big Deal"], style:"Brawling", age:20},
  {name:"Sinu Han / Han Shin Woo", gen:"Gen 1", height:184, hometown:"Seoul", aff:"Big Deal", former:["Workers"], style:"IA", age:22},
  {name:"Jake Kim / Kim Gi Myeong", gen:"Gen 2", height:194, hometown:"Seoul", aff:"Big Deal", former:["None"], style:"MMA", age:19},
  {name:"Gun Park / Jong Gun", gen:"Gen 1", height:190, hometown:"Tokyo", aff:"HNH Group", former:["Magami Family"], style:"Kyokushin", age:20},
  {name:"Vasco / Lee Eun Tae", gen:"Gen 2", height:183, hometown:"Seoul", aff:"Burn Knuckles", former:["Allied"], style:"Muay Thai", age:19},
  {name:"Hudson Ahn / Ahn Hyun Sung", gen:"Gen 2", height:178, hometown:"Ansan", aff:"Allied", former:["Ansan"], style:"Punching", age:20}
  // ... more characters follow the same structure
];

let streak = localStorage.getItem("lookism_streak") || 0;
let isBossMode = localStorage.getItem("lookism_mode") === "boss";
let guessesLeft = 5;
let gameActive = true;
const answer = characters[Math.floor(Math.random() * characters.length)];

document.getElementById("streakVal").textContent = streak;
updateModeUI();

function toggleMode() {
    isBossMode = !isBossMode;
    localStorage.setItem("lookism_mode", isBossMode ? "boss" : "classic");
    location.reload();
}

function updateModeUI() {
    const tag = document.getElementById("modeTag");
    const name = document.getElementById("modeName");
    const counter = document.getElementById("guessCounter");
    if(isBossMode) {
        tag.textContent = "BOSS RUSH MODE (5 Guesses)";
        tag.classList.add("boss-mode");
        name.textContent = "Classic";
        counter.style.display = "block";
    }
}

const input = document.getElementById("charSearch");
const sugBox = document.getElementById("suggestions");

input.oninput = () => {
    const val = input.value.toLowerCase();
    sugBox.innerHTML = "";
    if(!val) { sugBox.style.display = "none"; return; }
    const filtered = characters.filter(c => c.name.toLowerCase().includes(val));
    filtered.forEach(c => {
        const d = document.createElement("div");
        d.className = "sug-item";
        d.textContent = c.name;
        d.onclick = () => { input.value = c.name; sugBox.style.display = "none"; };
        sugBox.appendChild(d);
    });
    sugBox.style.display = filtered.length ? "block" : "none";
};

function makeGuess() {
    if(!gameActive) return;
    const g = characters.find(c => c.name.toLowerCase() === input.value.toLowerCase());
    if(!g) return;

    const row = document.getElementById("tableBody").insertRow(0);
    
    // Check Affiliation for Partial Match (Yellow)
    let affClass = "red";
    if (g.aff === answer.aff) affClass = "green";
    else if (answer.former.includes(g.aff) || g.former.includes(answer.aff)) affClass = "yellow";

    addCell(row, g.name, g.name === answer.name ? "green" : "red");
    addCell(row, g.gen, g.gen === answer.gen ? "green" : "red");
    addComparisonCell(row, g.height, answer.height, "cm");
    addCell(row, g.hometown, g.hometown === answer.hometown ? "green" : "red");
    addCell(row, g.aff, affClass);
    addCell(row, g.style, g.style === answer.style ? "green" : "red");
    addComparisonCell(row, g.age, answer.age, "");

    input.value = "";
    
    if(g.name === answer.name) {
        winGame();
    } else if(isBossMode) {
        guessesLeft--;
        document.getElementById("countVal").textContent = guessesLeft;
        if(guessesLeft <= 0) loseGame();
    }
}

function winGame() {
    gameActive = false;
    streak++;
    localStorage.setItem("lookism_streak", streak);
    document.getElementById("msg").innerHTML = `<h2 style="color:var(--correct)">VICTORY!</h2>`;
    document.getElementById("nextBtn").style.display = "inline-block";
}

function loseGame() {
    gameActive = false;
    localStorage.setItem("lookism_streak", 0);
    document.getElementById("msg").innerHTML = `<h2 style="color:var(--danger)">FAILED! It was ${answer.name}</h2>`;
    document.getElementById("nextBtn").style.display = "inline-block";
}

function addCell(row, val, cls) {
    const c = row.insertCell();
    c.textContent = val;
    c.className = cls;
}

function addComparisonCell(row, val, target, unit) {
    const c = row.insertCell();
    const arrow = val < target ? " â†‘" : (val > target ? " â†“" : "");
    c.textContent = val + unit + arrow;
    c.className = val === target ? "green" : "red";
}
</script>
</body>
</html>
